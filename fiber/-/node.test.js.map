{"version":3,"sources":["../../mol.node.jam.js","mol.ts","../../func/name/name.ts","../../fail/fail.node.ts","../../fail/fail.ts","../../ambient/ambient.ts","../../object2/object2.ts","../../log/log.ts","../../log/log_context.ts","../../log/log_debug.node.ts","../../log/log_filter.node.ts","../../log/log_group.ts","../../test/test.test.ts","../../assert/assert.test.ts","../../assert/assert.ts","../../const/const.test.ts","../../const/const.ts","../fiber.ts"],"names":[],"mappings":"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","file":"node.test.js","sourcesContent":[null,"declare namespace $ {}\nexport = $\n\n","namespace $ {\n\t\n\texport function $mol_func_name( func : Function ) : string {\n\t\treturn func.name\n\t}\n\n\texport function $mol_func_name_from< Target extends Function >( target : Target , source : Function ) {\n\t\tObject.defineProperty( target , 'name' , { value : source.name } )\n\t\treturn target\n\t}\n\n}\n","namespace $ {\n\n\tprocess.on( 'uncaughtException' , ( error : any )=> {\n\n\t\tif( !error ) return\n\n\t\tif( 'then' in error || $mol_fail_catched.has( error ) ) return\n\n\t\tconsole.error( error )\n\n\t\t$mol_fail_catched.add( error )\n\n\t} )\n\n\tprocess.on( 'unhandledRejection' , ( reason : any )=> {\n\n\t\tif( !reason ) return\n\n\t\tif( 'then' in reason || $mol_fail_catched.has( reason ) ) return\n\n\t\tconsole.error( reason )\n\n\t\t$mol_fail_catched.add( reason )\n\n\t} )\n\n}\n","namespace $ {\n\n\texport let $mol_fail_catched = new WeakSet< any >()\n\n\texport function $mol_fail_hidden( error : any ) : never {\n\t\tthrow error /// Use 'Never Pause Here' breakpoint in DevTools\n\t}\n\n}\n","namespace $ {\n\n\texport type $mol_ambient_context = Window & {\n\t\tPromise : PromiseConstructor\n\t\tMath : Math\n\t\tXMLHttpRequest : typeof XMLHttpRequest\n\t} & ( typeof $.$$ ) & ( typeof $ )\n\n\texport function $mol_ambient( overrides : Partial< $mol_ambient_context > ) : $mol_ambient_context {\n\t\treturn Object.setPrototypeOf( overrides , this )\n    }\n    \n}\n","namespace $ {\n\n\texport namespace $$ { let $ }\n\n\texport class $mol_object2 {\n\t\t\n\t\tstatic $ = $ as $mol_ambient_context\n\t\tstatic get $$() { return this.$ }\n\n\t\t$ = this.constructor['$'] as typeof $mol_object2.$\n\t\tget $$() { return this.$ }\n\n\t\tpublic static make< Instance >( this : { new() : Instance } , init? : ( instance : Instance )=> void  ) : Instance {\n\t\t\tconst instance = new this\n\t\t\tif( init ) init( instance )\n\t\t\treturn instance\n\t\t}\n\t\t\n\t\tstatic toString() { return this.name }\n\n\t\tdestructor() { }\n\n\t\t[ Symbol.toStringTag ] = `${ this.constructor }.make()`\n\t\t\n\t\ttoString() {\n\t\t\treturn this[ Symbol.toStringTag ]\n\t\t}\n\t\t\n\t}\n\t\n}\n","namespace $ {\n\n\texport function $mol_log( path : any , ... values : any[] ) {\n\t\t\n\t\tif( $mol_log_filter() == null ) return\n\t\t\n\t\tpath = String( path )\n\t\tif( path.indexOf( $mol_log_filter() ) === -1 ) return\n\t\t\n\t\tif( $mol_log_context() ) $mol_log_context()()\n\t\t\n\t\tconsole.debug( path , ... values )\n\n\t\tif( $mol_log_debug() == null ) return\n\t\tif( path.indexOf( $mol_log_debug() ) === -1 ) return\n\t\t\n\t\tdebugger\n\t}\n\t\n}\n","namespace $ {\n\n\tlet context : ()=> void = null\n\texport function $mol_log_context( next = context ) {\n\t\treturn context = next\n\t}\n\n}\n","namespace $ {\n\n\tlet debug : ()=> void\n\texport function $mol_log_debug( next = debug ) {\n\t\treturn debug = next\n\t}\n\n}\n","namespace $ {\n\n\tlet filter : string\n\texport var $mol_log_filter = function $mol_log_filter( next = filter ) {\n\t\treturn filter = next\n\t}\n\n}\n","namespace $ {\n\n\texport function $mol_log_group< Task extends Function >( name : string , task : Task ) {\n\t\t\n\t\treturn function $mol_log_group_wrapper( ... args : any [] ) {\n\n\t\t\tconst filter = $mol_log_filter()\n\t\t\tif( filter == null ) return task.apply( this , args )\n\n\t\t\tlet started = false\n\t\t\tlet prev = $mol_log_context()\n\n\t\t\t$mol_log_context( ()=> {\n\t\t\t\tif( prev ) prev()\n\t\t\t\tstarted = true\n\n\t\t\t\tif( filter ) console.group( name )\n\t\t\t\telse console.groupCollapsed( name )\n\n\t\t\t\t$mol_log_context( prev = null )\n\t\t\t} )\n\t\t\t\n\t\t\ttry {\n\t\t\t\treturn task.apply( this , args )\n\t\t\t} finally {\n\t\t\t\tif( started ) console.groupEnd()\n\t\t\t\t$mol_log_context( prev )\n\t\t\t}\n\n\t\t} as any as Task\n\n\t}\n\n}\n","namespace $ {\n\n\texport namespace $$ { let $ }\n\t\n\texport function $mol_test( set : { [ name : string ] : string | ( ( context : $mol_ambient_context )=> void ) } ) {\n\t\tfor( let name in set ) {\n\t\t\tconst code = set[ name ]\n\t\t\tconst test = ( typeof code === 'string' ) ? new Function( '' , code ) as ()=> void : code\n\t\t\t$mol_test_all.push( test )\n\t\t}\n\t\t$mol_test_schedule()\n\t}\n\n\texport let $mol_test_mocks = [] as Array< ( context : $mol_ambient_context )=> void >\n\n\texport const $mol_test_all = [] as Array< ( context : $mol_ambient_context )=> void >\n\n\texport function $mol_test_run() {\n\t\tfor( var test of $mol_test_all ) {\n\t\t\tlet context = Object.create( $$ )\n\t\t\tfor( let mock of $mol_test_mocks ) mock( context )\n\t\t\ttest( context )\n\t\t}\n\t}\n\t\n\tlet scheduled = false\n\texport function $mol_test_schedule() {\n\t\tif( scheduled ) return\n\t\tscheduled = true\n\n\t\tsetTimeout( $mol_log_group( '$mol_test_run()' , ()=> {\n\t\t\tscheduled = false\n \t\t\t$mol_test_run()\n\t\t} ) )\n\t}\n\n\n\t$mol_test_mocks.push( context => {\n\t\tlet seed = 0\n\n\t\tcontext.Math = Object.create( Math )\n\t\tcontext.Math.random = ()=> Math.sin( seed++ )\n\n\t\tconst forbidden = [ 'XMLHttpRequest' , 'fetch' ]\n\n\t\tfor( let api of forbidden ) {\n\t\t\tcontext[ api ] = new Proxy( function(){} , {\n\t\t\t\tget() {\n\t\t\t\t\t$mol_fail_hidden( new Error( `${ api } is forbidden in tests` ) )\n\t\t\t\t} ,\n\t\t\t\tapply() {\n\t\t\t\t\t$mol_fail_hidden( new Error( `${ api } is forbidden in tests` ) )\n\t\t\t\t} ,\n\t\t\t} )\n\t\t}\n\t\t\n\t} )\n\n\t$mol_test({\n\n\t\t'mocked Math.random'( $ ) {\n\t\t\tconsole.assert( $.Math.random() === 0 )\n\t\t\tconsole.assert( $.Math.random() === Math.sin(1) )\n\t\t} ,\n\n\t\t'forbidden XMLHttpRequest'( $ ) {\n\t\t\ttry {\n\t\t\t\tconsole.assert( void new $.XMLHttpRequest )\n\t\t\t} catch( error ) {\n\t\t\t\tconsole.assert( error.message === 'XMLHttpRequest is forbidden in tests' )\n\t\t\t}\n\t\t} ,\n\n\t\t'forbidden fetch'( $ ) {\n\t\t\ttry {\n\t\t\t\tconsole.assert( void $.fetch('') )\n\t\t\t} catch( error ) {\n\t\t\t\tconsole.assert( error.message === 'fetch is forbidden in tests' )\n\t\t\t}\n\t\t} ,\n\n\t})\n\t\n}\n","namespace $ {\n\t$mol_test( {\n\t\t\n\t\t'must be false'() {\n\t\t\t$mol_assert_not( 0 )\n\t\t} ,\n\t\t\n\t\t'must be true'() {\n\t\t\t$mol_assert_ok( 1 )\n\t\t} ,\n\t\t\n\t\t'two must be equal'() {\n\t\t\t$mol_assert_equal( 2 , 2 )\n\t\t} ,\n\t\t\n\t\t'three must be equal'() {\n\t\t\t$mol_assert_equal( 2 , 2 , 2 )\n\t\t} ,\n\t\t\n\t\t'two must be unique'() {\n\t\t\t$mol_assert_unique( [ 3 ] , [ 3 ] )\n\t\t} ,\n\t\t\n\t\t'three must be unique'() {\n\t\t\t$mol_assert_unique( [ 3 ] , [ 3 ] , [ 3 ] )\n\t\t} ,\n\t\t\n\t} )\n}\n","namespace $ {\n\t\n\texport function $mol_assert_ok( value : any ) {\n\t\tif( value ) return\n\t\tthrow new Error( `Not true (${value})` )\n\t}\n\t\n\texport function $mol_assert_not( value : any ) {\n\t\tif( !value ) return\n\t\tthrow new Error( `Not false (${value})` )\n\t}\n\t\n\texport function $mol_assert_fail( handler : ()=> any , ErrorRight? : any ) {\n\t\ttry {\n\t\t\thandler()\n\t\t} catch( error ) {\n\t\t\tif( ErrorRight ) if(!( error instanceof ErrorRight )) throw error\n\t\t\treturn error\n\t\t}\n\t\tthrow new Error( 'Not failed' )\n\t}\n\t\n\texport function $mol_assert_equal< Value >( ... args : Value[] ) {\n\t\tfor( let i = 0 ; i < args.length ; ++i ) {\n\t\t\tfor( let j = 0 ; j < args.length ; ++j ) {\n\t\t\t\tif( i === j ) continue\n\t\t\t\tif( Number.isNaN( args[i] as any as number ) && Number.isNaN( args[j] as any as number ) ) continue\n\t\t\t\tif( args[i] !== args[j] ) throw new Error( `Not equal ( ${ args[i] } ≠ ${ args[j] } )` )\n\t\t\t}\n\t\t}\n\t}\n\t\n\texport function $mol_assert_unique( ... args : any[] ) {\n\t\tfor( let i = 0 ; i < args.length ; ++i ) {\n\t\t\tfor( let j = 0 ; j < args.length ; ++j ) {\n\t\t\t\tif( i === j ) continue\n\t\t\t\tif( args[i] === args[j] || ( Number.isNaN( args[i] as any as number ) && Number.isNaN( args[j] as any as number ) ) ) {\n\t\t\t\t\tthrow new Error( `Not unique ( args[${ i }] = args[${ j }] = ${ args[i] } )` )\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n}\n","namespace $ {\n\t$mol_test( { \n\t\t\n\t\t'const returns stored value'() {\n\t\t\n\t\t\tconst foo = { bar : $mol_const( Math.random() ) }\n\t\t\t\n\t\t\t$mol_assert_equal( foo.bar() , foo.bar() )\n\t\t\t$mol_assert_equal( foo.bar() , foo.bar['()'] )\n\t\t\t\n\t\t} ,\n\n\t} )\n}\n","namespace $ { \n\texport function $mol_const< Value >( value : Value ) {\n\t\tvar getter = <{ () : Value , '()' : Value }> ( () => value )\n\t\tgetter['()'] = value\n\t\treturn getter\n\t}\n}\n","namespace $ {\n\n\texport let $mol_fiber_stack = [] as $mol_fiber[]\n\n\texport function $mol_fiber_make< Result = void >( handler : ()=> Result , abort? : void | ( ()=> void ) ) {\n\t\tif( $mol_fiber.current ) $mol_fiber.current.step()\n\n\t\tlet master = $mol_fiber.current && $mol_fiber.current.master as $mol_fiber< Result >\n\t\tif( master ) return master \n\t\t\n\t\tconst id = `${ $mol_fiber.current || '$mol_fiber' }/${ $mol_fiber.current ? $mol_fiber.current.cursor : '' }:${ $mol_func_name( handler ) }`\n\t\treturn new $mol_fiber< Result >( id , $mol_fiber.current , handler , abort )\n\t}\n\t\n\texport function $mol_fiber_start< Result = void >( handler : ()=> Result ) {\n\t\treturn $mol_fiber_make( handler ).start()\n\t}\n\n\texport function $mol_fiber_defer< Result = void >( handler : ()=> Result ) {\n\t\tconst fiber = $mol_fiber_make( handler )\n\t\tfiber.schedule().then( fiber.start.bind( fiber ) )\n\t}\n\n\texport function $mol_fiber_func< Handler extends ( ... args : any[] )=> Result , Result = void >( handler : Handler ) {\n\t\treturn function $mol_fiber_func_wrapper( ... args : any[] ) {\n\t\t\treturn $mol_fiber_make( $mol_func_name_from( handler.bind( this , ... args ) as ()=> Result , handler ) ).start()\n\t\t} as Handler\n\t}\n\n\texport function $mol_fiber_method< Host , Result >(\n\t\tobj : Host ,\n\t\tname : string ,\n\t\tdescr : TypedPropertyDescriptor< ( ... args : any[] )=> Result >\n\t) {\n\t\tconst value = descr.value\n\t\tdescr.value = function $mol_fiber_method_wrapper( ... args : any[] ) {\n\t\t\tconst handler = value.bind( this , ... args ) as ()=> Result\n\t\t\thandler[ Symbol.toStringTag ] = `${ this }.${ name }()`\n\t\t\treturn $mol_fiber_start( handler )\n\t\t}\n\t}\n\n\texport function $mol_fiber_sync< Args extends any[] , Result = void >(\n\t\trequest : ( ... args : Args )=> PromiseLike< Result >\n\t) : ( ... args : Args )=> Result {\n\n\t\treturn function $mol_fiber_sync_wrapper( ... args : Args ) {\n\n\t\t\tconst fiber = $mol_fiber_make< Result >( $mol_func_name_from( ()=> {\n\t\t\t\treturn $mol_fail_hidden( request( ... args ).then(\n\t\t\t\t\tres => { fiber.done( res ) } ,\n\t\t\t\t\terror => { fiber.fail( error ) } ,\n\t\t\t\t) )\n\t\t\t} , request ) )\n\n\t\t\treturn fiber.start()\n\t\t}\n\n\t}\n\n\texport function $mol_fiber_async< Result = void >(\n\t\trequest : (\n\t\t\tback : (\n\t\t\t\tresponse :  ( ... args : any[] )=> Result\n\t\t\t)=> ( ... args : any[] )=> void\n\t\t)=> { (): any } | void\n\t) : Result {\n\n\t\tconst fiber = $mol_fiber_make< Result >( $mol_func_name_from( ()=> {\n\t\t\t\n\t\t\tconst promise = new Promise( ( done , fail )=> {\n\n\t\t\t\tfiber.abort = request( response => ( ... args : any[] )=> {\n\t\t\t\n\t\t\t\t\tif( !fiber.masters ) return\n\t\t\n\t\t\t\t\tnew Promise( ()=> {\n\t\t\t\t\t\tfiber.done( response( ... args ) )\n\t\t\t\t\t} ).catch( error => {\n\t\t\t\t\t\tfiber.fail( error )\n\t\t\t\t\t} )\n\n\t\t\t\t\tif( fiber.slave ) fiber.slave.start()\n\t\t\n\t\t\t\t} )\n\n\t\t\t} )\n\n\t\t\treturn $mol_fail_hidden( promise )\n\n\t\t} , request ) )\n\n\t\treturn fiber.start()\n\n\t}\n\n\texport function $mol_fiber_warp() {\n\t\twhile( $mol_fiber.queue.length ) $mol_fiber.tick()\n\t}\n\n\texport function $mol_fiber_fence( func : ()=> any ) {\n\t\tconst prev = $mol_fiber.current\n\t\ttry {\n\t\t\t$mol_fiber.current = null\n\t\t\tfunc()\n\t\t} finally {\n\t\t\t$mol_fiber.current = prev\n\t\t}\n\t}\n\n\texport class $mol_fiber< Result = any > extends $mol_object2 {\n\n\t\tstatic quant = 8\n\n\t\tstatic current : $mol_fiber\n\t\t\n\t\tstatic scheduled = 0\n\t\tstatic deadline = Date.now() + $mol_fiber.quant\n\n\t\tstatic tick() {\n\n\t\t\t$mol_fiber.deadline = Date.now() + $mol_fiber.quant\n\t\n\t\t\tif( $mol_fiber.queue.length == 0 ) return\n\n\t\t\twhile( true ) {\n\t\t\t\tconst resolve = $mol_fiber.queue.shift()\n\t\t\t\tif( resolve ) resolve()\n\t\t\t\telse break\n\t\t\t}\n\t\t}\n\n\t\tstatic schedule() {\n\t\t\tif( $mol_fiber.scheduled ) return\n\n\t\t\tconst schedule = this.$.requestAnimationFrame || this.$.setTimeout\n\n\t\t\t$mol_fiber.scheduled = schedule( ()=> {\n\t\t\t\t$mol_fiber.scheduled = 0\n\t\t\t\t$mol_fiber.tick()\n\t\t\t} )\n\t\t}\n\n\t\tstatic queue = [] as ( ()=> void )[]\n\n\t\tconstructor(\n\t\t\tid : string ,\n\t\t\tpublic slave : $mol_fiber ,\n\t\t\tpublic handler : ()=> Result ,\n\t\t\tpublic abort? : void | ( ()=> void ) ,\n\t\t) {\n\t\t\tsuper()\n\t\t\t\n\t\t\tthis.toString = $mol_const( id )\n\n\t\t\tif( slave ) {\n\t\t\t\tslave.master = this\n\t\t\t\tthis.$ = slave.$\n\t\t\t}\n\t\t}\n\n\t\tdestructor() {\n\t\t\tif( !this.masters ) return\n\n\t\t\tfor( let master of this.masters ) master.destructor()\t\t\t\n\t\t\tthis.masters = null\n\n\t\t\tif( this.abort ) this.abort()\n\t\t}\n\n\t\tmasters = [] as $mol_fiber[]\n\t\tcursor = -1\n\n\t\terror : Error | Promise< Result > = undefined\n\t\tresult : Result = undefined\n\n\t\tprotected _done : ( result : Result )=> void\n\n\t\tdone( result : Result ) {\n\t\t\tif( !this.masters ) return\n\n\t\t\tthis.result = result\n\t\t\tthis.error = null\n\t\t\tthis.abort = null\n\t\t\tthis.destructor()\n\t\t\t\n\t\t\tthis.$.$mol_log( this , result )\n\n\t\t\treturn result\n\t\t}\n\n\t\tstatic catched = new WeakSet\n\n\t\tfail( error : Error | Promise<Result> ) : Error | Promise<Result> {\n\t\t\tif( !this.masters ) return\n\t\t\t\n\t\t\tif( 'then' in error ) {\n\n\t\t\t\tconst listener = this.start.bind( this )\n\t\t\t\terror = error.then( listener , listener )\n\t\t\t\n\t\t\t} else {\n\n\t\t\t\tif( !$mol_fiber.catched.has( error ) ) {\n\t\t\t\t\tif( error.stack ) error.stack = error.stack.replace( /.*\\$mol_fiber.*[\\n\\r]*/g , '' )\n\t\t\t\t\t$mol_fiber.catched.add( error )\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.abort = null\n\t\t\t\tthis.destructor()\n\t\n\t\t\t}\n\n\t\t\tthis.error = error\t\t\t\n\t\t\tthis.$.$mol_log( this , error )\n\n\t\t\treturn error\n\t\t}\n\n\t\tschedule() {\n\t\t\treturn new Promise( done => {\n\t\t\t\t$mol_fiber.queue.push( done )\n\t\t\t\t$mol_fiber.schedule()\n\t\t\t} )\n\t\t}\n\n\t\tlimit() {\n\n\t\t\tconst now = Date.now()\n\t\t\tif( now <= $mol_fiber.deadline ) return\n\n\t\t\tif( !$mol_fiber.current && $mol_fiber.queue.length === 0 ) {\n\t\t\t\t$mol_fiber.deadline = now + $mol_fiber.quant\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t$mol_fail_hidden( this.schedule() )\n\t\t}\n\n\t\tstart() {\n\n\t\t\tif( this.masters ) {\n\n\t\t\t\tthis.$.$mol_log( this , 'start' )\n\n\t\t\t\tconst slave = $mol_fiber.current\n\n\t\t\t\ttry {\n\t\t\t\t\t\n\t\t\t\t\tthis.cursor = -1\n\t\t\t\t\tthis.error = undefined\n\t\t\t\t\t\n\t\t\t\t\tthis.limit()\n\t\t\t\t\t\n\t\t\t\t\t$mol_fiber.current = this\n\n\t\t\t\t\tthis.done( this.handler() )\n\n\t\t\t\t} catch( error ) {\n\t\t\t\t\tthis.fail( error )\n\t\t\t\t} finally {\n\t\t\t\t\t$mol_fiber.current = slave\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif( this.error ) $mol_fail_hidden( this.error )\n\t\t\treturn this.result\n\n\t\t}\n\n\t\tstep() {\n\t\t\treturn ++ this.cursor\n\t\t}\n\n\t\tget master() {\n\t\t\treturn this.masters[ this.cursor ]\n\t\t}\n\t\tset master( next : $mol_fiber ) {\n\t\t\tthis.masters[ this.cursor ] = next\n\t\t}\n\n\t}\n\n}\n"]}